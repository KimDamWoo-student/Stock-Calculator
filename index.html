<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주식 매도 계산기</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #1a73e8;
            font-size: 24px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 16px;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 18px;
            box-sizing: border-box;
        }
        .sub-input-group {
            display: flex;
            gap: 10px;
        }
        .sub-input-group > div {
            flex: 1;
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }
        .result {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .result p {
            margin: 12px 0;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
        }
        .result span {
            font-weight: bold;
        }
        .result .highlight-blue {
            color: #1a73e8;
            font-size: 18px;
        }
        .result .highlight-red {
            color: #d93025;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>📈 주식 매도 계산기</h1>

        <div class="input-group">
            <label for="buy-price">매수 평균 가격 (원)</label>
            <input type="number" id="buy-price" placeholder="주당 매수 가격">
        </div>

        <div class="input-group">
            <label for="quantity">보유 수량 (주)</label>
            <input type="number" id="quantity" placeholder="총 주식 수">
        </div>

        <div class="input-group">
            <label for="sell-price">현재 (매도) 가격 (원)</label>
            <input type="number" id="sell-price" placeholder="주당 매도 희망 가격">
        </div>
        
        <div class="input-group sub-input-group">
            <div>
                <label for="fee-rate">수수료 (%)</label>
                <input type="number" id="fee-rate" placeholder="기본 0.015">
            </div>
            <div>
                <label for="tax-rate">거래세 (%)</label>
                <input type="number" id="tax-rate" placeholder="기본 0.23">
            </div>
        </div>

        <button onclick="calculate()">계산하기</button>

        <div class="result" id="result-area">
            <p>수수료/세금: <span id="fee-tax">0 원</span></p>
            <p class="highlight-blue">예상 수령액: <span id="received-amount">0 원</span></p>
            <p class="highlight-red">손익분기점: <span id="bep-price">0 원/주</span></p>
        </div>
    </div>

    <script>
        function calculate() {
            // --- 입력값 가져오기 ---
            const buyPrice = parseInt(document.getElementById('buy-price').value);
            const quantity = parseInt(document.getElementById('quantity').value);
            const sellPrice = parseInt(document.getElementById('sell-price').value);

            // 수수료율과 세율 입력값 가져오기
            let feeRateInput = document.getElementById('fee-rate').value;
            let taxRateInput = document.getElementById('tax-rate').value;

            // --- 유효성 검사 ---
            if (isNaN(buyPrice) || isNaN(quantity) || isNaN(sellPrice) || buyPrice <= 0 || quantity <= 0 || sellPrice <= 0) {
                alert("매수, 수량, 매도 가격에 올바른 숫자를 입력해주세요.");
                return;
            }

            // --- 수수료/세율 설정 (입력 없으면 기본값) ---
            // 사용자가 입력한 값이 비어있으면 ''(빈 문자열)이 됨.
            const feePercent = (feeRateInput === '') ? 0.015 : parseFloat(feeRateInput);
            const taxPercent = (taxRateInput === '') ? 0.23 : parseFloat(taxRateInput);

            // 퍼센트(%) 값을 계산을 위한 소수점으로 변환
            const feeRate = feePercent / 100;
            const taxRate = taxPercent / 100;
            
            // --- 계산 로직 ---
            const totalSellAmount = sellPrice * quantity;
            const commission = totalSellAmount * feeRate;
            const tax = totalSellAmount * taxRate;
            const totalDeduction = commission + tax;
            const actualReceived = totalSellAmount - totalDeduction;
            const breakEvenPoint = buyPrice / (1 - (feeRate + taxRate));

            // --- 결과 표시 ---
            document.getElementById('fee-tax').innerText = Math.round(totalDeduction).toLocaleString('ko-KR') + " 원";
            document.getElementById('received-amount').innerText = Math.round(actualReceived).toLocaleString('ko-KR') + " 원";
            document.getElementById('bep-price').innerText = Math.ceil(breakEvenPoint).toLocaleString('ko-KR') + " 원/주";
        }
    </script>

</body>
</html>