<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ì‹ ë§¤ë„ ê³„ì‚°ê¸°</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #1a73e8;
            font-size: 24px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 16px;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 18px;
            box-sizing: border-box;
        }
        .sub-input-group {
            display: flex;
            gap: 10px;
        }
        .sub-input-group > div {
            flex: 1;
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }
        .result {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .result p {
            margin: 12px 0;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
        }
        .result span {
            font-weight: bold;
        }
        .result .highlight-blue {
            color: #1a73e8;
            font-size: 18px;
        }
        .result .highlight-red {
            color: #d93025;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ“ˆ ì£¼ì‹ ë§¤ë„ ê³„ì‚°ê¸°</h1>

        <div class="input-group">
            <label for="buy-price">ë§¤ìˆ˜ í‰ê·  ê°€ê²© (ì›)</label>
            <input type="number" id="buy-price" placeholder="ì£¼ë‹¹ ë§¤ìˆ˜ ê°€ê²©">
        </div>

        <div class="input-group">
            <label for="quantity">ë³´ìœ  ìˆ˜ëŸ‰ (ì£¼)</label>
            <input type="number" id="quantity" placeholder="ì´ ì£¼ì‹ ìˆ˜">
        </div>

        <div class="input-group">
            <label for="sell-price">í˜„ì¬ (ë§¤ë„) ê°€ê²© (ì›)</label>
            <input type="number" id="sell-price" placeholder="ì£¼ë‹¹ ë§¤ë„ í¬ë§ ê°€ê²©">
        </div>
        
        <div class="input-group sub-input-group">
            <div>
                <label for="fee-rate">ìˆ˜ìˆ˜ë£Œ (%)</label>
                <input type="number" id="fee-rate" placeholder="ê¸°ë³¸ 0.015">
            </div>
            <div>
                <label for="tax-rate">ê±°ë˜ì„¸ (%)</label>
                <input type="number" id="tax-rate" placeholder="ê¸°ë³¸ 0.23">
            </div>
        </div>

        <button onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>

        <div class="result" id="result-area">
            <p>ìˆ˜ìˆ˜ë£Œ/ì„¸ê¸ˆ: <span id="fee-tax">0 ì›</span></p>
            <p class="highlight-blue">ì˜ˆìƒ ìˆ˜ë ¹ì•¡: <span id="received-amount">0 ì›</span></p>
            <p class="highlight-red">ì†ìµë¶„ê¸°ì : <span id="bep-price">0 ì›/ì£¼</span></p>
        </div>
    </div>

    <script>
        function calculate() {
            // --- ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸° ---
            const buyPrice = parseInt(document.getElementById('buy-price').value);
            const quantity = parseInt(document.getElementById('quantity').value);
            const sellPrice = parseInt(document.getElementById('sell-price').value);

            // ìˆ˜ìˆ˜ë£Œìœ¨ê³¼ ì„¸ìœ¨ ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            let feeRateInput = document.getElementById('fee-rate').value;
            let taxRateInput = document.getElementById('tax-rate').value;

            // --- ìœ íš¨ì„± ê²€ì‚¬ ---
            if (isNaN(buyPrice) || isNaN(quantity) || isNaN(sellPrice) || buyPrice <= 0 || quantity <= 0 || sellPrice <= 0) {
                alert("ë§¤ìˆ˜, ìˆ˜ëŸ‰, ë§¤ë„ ê°€ê²©ì— ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // --- ìˆ˜ìˆ˜ë£Œ/ì„¸ìœ¨ ì„¤ì • (ì…ë ¥ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’) ---
            // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ì´ ë¹„ì–´ìˆìœ¼ë©´ ''(ë¹ˆ ë¬¸ìì—´)ì´ ë¨.
            const feePercent = (feeRateInput === '') ? 0.015 : parseFloat(feeRateInput);
            const taxPercent = (taxRateInput === '') ? 0.23 : parseFloat(taxRateInput);

            // í¼ì„¼íŠ¸(%) ê°’ì„ ê³„ì‚°ì„ ìœ„í•œ ì†Œìˆ˜ì ìœ¼ë¡œ ë³€í™˜
            const feeRate = feePercent / 100;
            const taxRate = taxPercent / 100;
            
            // --- ê³„ì‚° ë¡œì§ ---
            const totalSellAmount = sellPrice * quantity;
            const commission = totalSellAmount * feeRate;
            const tax = totalSellAmount * taxRate;
            const totalDeduction = commission + tax;
            const actualReceived = totalSellAmount - totalDeduction;
            const breakEvenPoint = buyPrice / (1 - (feeRate + taxRate));

            // --- ê²°ê³¼ í‘œì‹œ ---
            document.getElementById('fee-tax').innerText = Math.round(totalDeduction).toLocaleString('ko-KR') + " ì›";
            document.getElementById('received-amount').innerText = Math.round(actualReceived).toLocaleString('ko-KR') + " ì›";
            document.getElementById('bep-price').innerText = Math.ceil(breakEvenPoint).toLocaleString('ko-KR') + " ì›/ì£¼";
        }
    </script>

</body>
</html>